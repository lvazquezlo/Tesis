ggplot(aes(year, yield, color = continent)) +
geom_line() +
facet_wrap(~ crop, scales = "free_y")
mtcars
rivers
sleep
volcano
airquality
mtcars
mtcars %>%
select(mpg, cyl:vs)
mtcars %>%
select(mpg, cyl:vs) %>%
lm(mpg ~ .)
mtcars %>%
select(mpg, cyl:vs) %>%
lm(mpg ~ ,.)
datos <- mtcars %>%
select(mpg, cyl:vs)
lm(mpg ~ ., data = datos)
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(readxl)
library(janitor)
abortos_data <- read_csv("Documents/itam/Curso_R/Int_Leg_Emb.csv")
abortos_data <- read_csv("Documents/itam/Curso_R/Int_Leg_Emb.csv") %>%
clean_names()
abortos_data
diccionario_data <- read_csv("Documents/itam/Curso_R/Diccionario de datos ILE.csv")
diccionario_data <- read_csv("Documents/itam/Curso_R/Diccionario de datos ILE.csv") %>%
clean_names()
diccionario_data %>% View()
View(abortos_data)
View(diccionario_data)
install.packages("skimr")
library(skimr)
skim(abortos_data)
hist(abortos_data$naborto)
hist(abortos_data$naborto)
hist(abortos_data$naborto)
abortos_data$naborto
hist(abortos_data$nhijos)
abortos_data
abortos_data %>% pull(entidad)
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO")
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
select(edad, fsexual, nhijos, gesta, naborto)
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO")
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", across(edad:naborto, !is.na))
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", !is.na(edad:naborto))
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO")
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", !is.na(edad))
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", !is.na(edad),!is.na(fsexual),!is.na(nhijos),!is.na(gesta),!is.na(naborto))
abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", !is.na(edad),!is.na(fsexual),!is.na(nhijos),!is.na(gesta),!is.na(naborto)) %>%
select(-entidad)
input_data <- abortos_data %>%
select(entidad, edad, fsexual, nhijos, gesta, naborto) %>%
filter(entidad == "CIUDAD DE MEXICO", !is.na(edad),!is.na(fsexual),!is.na(nhijos),!is.na(gesta),!is.na(naborto)) %>%
select(-entidad)
mod0 <- lm(naborto ~ ., data = input_data)
summary(mod0)
plot(mod0)
abortos_data
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto))
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE))
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media, entidad)) %>%
geom_bar()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media, entidad)) +
geom_bar()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media_abortos, entidad)) +
geom_bar()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media_abortos, entidad)) +
geom_col()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
mutate(media_abortos = fct_reorder(media_abortos, sum)) %>%
ggplot(aes(media_abortos, entidad)) +
geom_col()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media_abortos, entidad)) +
geom_col()
theme_set(theme_light())
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(media_abortos = mean(naborto, na.rm = TRUE)) %>%
ggplot(aes(media_abortos, entidad)) +
geom_col()
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
count(naborto)
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
summarise(n_abortos = n(naborto))
abortos_data %>%
filter(!is.na(entidad)) %>%
group_by(entidad) %>%
count()
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
group_by(alc_o_municipio) %>%
count()
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
group_by(alc_o_municipio) %>%
count() %>%
ggplot(aes(n, alc_o_municipio)) +
geom_col()
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
group_by(alc_o_municipio) %>%
count() %>%
filter(n > 10) %>%
ggplot(aes(n, alc_o_municipio)) +
geom_col()
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
group_by(alc_o_municipio) %>%
count() %>%
filter(n > 10) %>%
mutate(alc_o_municipio = fct_reorder(alc_o_municipio, n)) %>%
ggplot(aes(n, alc_o_municipio)) +
geom_col()
abortos_data %>%
filter(entidad == "CIUDAD DE MEXICO") %>%
group_by(alc_o_municipio) %>%
count() %>%
filter(n > 10) %>%
mutate(alc_o_municipio = fct_reorder(alc_o_municipio, -n)) %>%
ggplot(aes(n, alc_o_municipio)) +
geom_col()
library(tidyverse)
library(readxl)
library(janitor)
library(skimr)
library(lubridate)
library(stringr)
library(scales)
library(ggtext)
theme_set(theme_light())
ruta <- "C:/Users/luivazquez/Downloads/R/int/"
diccionario_data <- read_csv(paste0(ruta, "Diccionario de datos ILE.csv")) %>%
clean_names()
abortos_data <- read_csv(paste0(ruta, "Int_Leg_Emb.csv")) %>%
clean_names() %>%
mutate(across(where(is.character), str_to_title),
clues_hospital = str_to_upper(clues_hospital),
year = year(fingreso),
month = month(fingreso),
clues_hospital = as_factor(clues_hospital))
ruta <- "Documents/itam/Curso_R/"
diccionario_data <- read_csv(paste0(ruta, "Diccionario de datos ILE.csv")) %>%
clean_names()
abortos_data <- read_csv(paste0(ruta, "Int_Leg_Emb.csv")) %>%
clean_names() %>%
mutate(across(where(is.character), str_to_title),
clues_hospital = str_to_upper(clues_hospital),
year = year(fingreso),
month = month(fingreso),
clues_hospital = as_factor(clues_hospital))
abortos_cdmx <- abortos_data %>%
filter(entidad == "Ciudad De Mexico", !is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio))
skim(abortos_cdmx)
abortos_cdmx %>%
group_by(date_aux) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n)) +
geom_line(color = "darkolivegreen4") +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data
abortos_data %>%
mutate(capital = if_else(entidad == "Ciudad De Mexico", "Capital", "Provincia"))
abortos_data <- read_csv(paste0(ruta, "Int_Leg_Emb.csv")) %>%
clean_names() %>%
mutate(across(where(is.character), str_to_title),
clues_hospital = str_to_upper(clues_hospital),
year = year(fingreso),
month = month(fingreso),
clues_hospital = as_factor(clues_hospital),
capital = if_else(entidad == "Ciudad De Mexico", "Capital", "Provincia"))
abortos_data %>% View()
abortos_data %>%
filter(!is.na(fingreso, year >= 2016)) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio))
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio))
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line(color = "darkolivegreen4") +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux) %>%
count()
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup()
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line(color = "darkolivegreen4") +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
?aes
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n, colour = capital)) +
geom_line(color = "darkolivegreen4") +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line(color = "darkolivegreen4") +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup()
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line() +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
filter(!is.na(capital)) %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line() +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
filter(!is.na(capital)) %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line() +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile") +
theme(legend.position = "bottom")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
filter(!is.na(capital)) %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line() +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en la CDMX a través del tiempo?",
subtitle = "Número de abortos mensuales",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile",
color = "") +
theme(legend.position = "bottom")
abortos_data %>%
filter(!is.na(fingreso), year >= 2016) %>%
mutate(date_aux = dmy(paste0("01-", month, "-", year)),
alc_o_municipio = if_else(alc_o_municipio == "La Magdalena Contreras", "Magdalena Contreras", alc_o_municipio)) %>%
group_by(date_aux, capital) %>%
count() %>%
ungroup() %>%
filter(!is.na(capital)) %>%
ggplot(aes(date_aux, n, color = capital)) +
geom_line() +
geom_vline(xintercept = dmy("01-12-2018"), linetype = "dotted") +
scale_y_continuous(labels = scales::label_comma()) +
labs(x = "",
y = "# de abortos",
title = "¿Cómo ha cambiado el número de abortos en México a través del tiempo?",
subtitle = "Número de abortos mensuales, CDMX vs resto de la República",
caption = "Fuente: https://www.semujeres.cdmx.gob.mx/ile",
color = "") +
theme(legend.position = "bottom")
library(tidyverse)
library(readxl)
library(janitor)
library(skimr)
library(lubridate)
library(stringr)
library(scales)
library(ggtext)
theme_set(theme_light())
ruta <- "Documents/itam/Curso_R/"
diccionario_data <- read_csv(paste0(ruta, "Diccionario de datos ILE.csv")) %>%
clean_names()
abortos_data <- read_csv(paste0(ruta, "Int_Leg_Emb.csv")) %>%
clean_names() %>%
mutate(across(where(is.character), str_to_title),
clues_hospital = str_to_upper(clues_hospital),
year = year(fingreso),
month = month(fingreso),
clues_hospital = as_factor(clues_hospital),
capital = if_else(entidad == "Ciudad De Mexico", "Capital", "Provincia"))
knitr::opts_chunk$set(echo = TRUE)
muetra1 <- rnorm(10000, mean = 13000, sd = 800)
muestra2 <- rnorm(10000, mean = 8000, sd = 600)
t.test(muestra1, muestra2)
muestra1 <- rnorm(10000, mean = 13000, sd = 800)
muestra2 <- rnorm(10000, mean = 8000, sd = 600)
t.test(muestra1, muestra2)
hombres <- rnorm(10000, mean = 13000, sd = 800)
mujeres <- rnorm(10000, mean = 8000, sd = 600)
t.test(muestra1, muestra2)
hombres <- rnorm(10000, mean = 13000, sd = 800)
mujeres <- rnorm(10000, mean = 8000, sd = 600)
t.test(hombres, mujeres)
?t.test
hombres <- rnorm(100, mean = 13000, sd = 800)
mujeres <- rnorm(100, mean = 8000, sd = 600)
t.test(hombres, mujeres)
t.test(hombres, mujeres, alternative = c("two.sided"))
hombres <- rnorm(100, mean = 8000, sd = 800)
mujeres <- rnorm(100, mean = 8000, sd = 600)
t.test(hombres, mujeres, alternative = c("two.sided"))
t.test(hombres, mujeres, alternative = c("greater"))
hombres <- rnorm(100, mean = 8500, sd = 800)
mujeres <- rnorm(100, mean = 8000, sd = 800)
t.test(hombres, mujeres, alternative = c("greater"), var.equal = TRUE)
?stats
library(help = "stats")
library(tidyverse)
library(skimr)
library(normtest)
library(nortest)
library(MASS)
library(car)
library(moments)
library(gglm)
library(ggfortify)
theme_set(theme_light())
ruta <- "~/Documents/itam/Tesis_git/"
setwd(ruta)
data_modelo <- readRDS(file = "Output/data_modelo.rds")
df.aventurate <- data_modelo[[1]]
df.educativo <- data_modelo[[2]] %>%
na.omit()
df.sueno <- data_modelo[[3]]
df.tradicional <- data_modelo[[4]]
df.global <- data_modelo[[5]]
mod_log_log <- function(df){
df %>%
mutate(campus = if_else(campus == "Si", 1, 0),
campus = as.factor(campus)) %>%
lm(log(Venta_Estado) ~ log(pib_pc), data = .)
}
#Aventurate
aven1 <- mod_log_log(df.aventurate)
#Educativo
educ1 <- mod_log_log(df.educativo)
#Mi sueño
suen1 <- mod_log_log(df.sueno)
stargazer(aven1, educ1, suen1, type = "latex")
library(stargazer)
stargazer(aven1, educ1, suen1, type = "latex")
mod_sq <- function(df){
df %>%
mutate(campus = if_else(campus == "Si", 1, 0),
campus = as.factor(campus)) %>%
lm(Venta_Estado ~ pib_pc + I(pib_pc ^ 2), data = .)
}
#Aventurate
aven_sq <- mod_sq(df.aventurate)
#Educativo
educ_sq <- mod_sq(df.educativo)
#Mi sueño
suen_sq <- mod_sq(df.sueno)
stargazer(aven_sq, educ_sq, suen_sq, type = "text")
stargazer(aven_sq, educ_sq, suen_sq, type = "latex")
